(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{71064:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/product123/[id]",function(){return a(92464)}])},92464:(e,r,a)=>{"use strict";a.r(r),a.d(r,{__N_SSP:()=>q,default:()=>V});var s=a(37876),t=a(14232),l=a(14e3),d=a(34214),i=a(15039),o=a.n(i);let n=(0,t.forwardRef)((e,r)=>{let{children:a,className:t,container:l="xxl",...d}=e;return(0,s.jsx)("div",{ref:r,className:o()("page",t,{[`container${"string"==typeof l?`-${l}`:""}`]:l}),...d,children:a})});n.displayName="Page";var c=a(26457),m=a(44344);let h=(0,t.forwardRef)((e,r)=>{let{tag:a="div",children:t,...l}=e;return(0,s.jsx)(a,{ref:r,...l,children:t})});h.displayName="TagWrapper";var u=a(24395),p=a(57448),x=a(12743);(0,t.forwardRef)((e,r)=>{let{children:a,className:t,isToolbar:l,isVertical:d,size:i,ariaLabel:n,...c}=e,m=l?"toolbar":"group";return(0,s.jsx)("div",{ref:r,className:o()({[`btn-${m}`]:!d,"btn-group-vertical":d&&"group"===m,[`btn-group-${i}`]:i},t),role:m,"aria-label":n,...c,children:a})}).displayName="ButtonGroup";let g=(0,t.forwardRef)((e,r)=>{let{children:a,tag:t="button",type:l="button",to:d,href:i,isActive:n,color:c,isOutline:m,isLight:g,isLink:f,className:j,icon:N,rounded:b,size:y,isDisable:v,shadow:w,hoverShadow:$,target:k,isVisuallyHidden:S,...C}=e,R=o()("btn",{[`btn-${m||f?`outline-${c}`:c}`]:c&&!g||c&&f,"border-transparent":f,[`btn-${y}`]:y,[`btn-hover-shadow${"default"!==$?`-${$}`:""}`]:$,[`btn-light-${c}`]:g,[`shadow${"default"!==w?`-${w}`:""}`]:!!w,[`rounded${"default"!==b?`-${b}`:""}`]:b,"rounded-0":"bottom"===b||"top"===b||"end"===b||"start"===b||0===b,"btn-only-icon":!a||S,disabled:v,active:n},j),_=(0,s.jsxs)(s.Fragment,{children:[N&&(0,s.jsx)(u.A,{icon:N,className:"btn-icon"}),S?(0,s.jsx)("span",{className:"visually-hidden",children:"Toggle Dropdown"}):a]}),A=v&&{tabIndex:-1,"aria-disabled":!0,disabled:!0};return"a"===t?"string"==typeof d&&/^#/i.test(d)?(0,s.jsx)(x.Vq,{ref:r,className:R,to:d,...A,...C,children:_}):d?(0,s.jsx)(p.N_,{ref:r,className:R,to:d,rel:"noopener",target:k,...A,...C,children:_}):(0,s.jsx)("a",{ref:r,className:R,href:i,role:"button",rel:"noopener",target:k,...A,...C,children:_}):(0,s.jsx)(h,{ref:r,tag:t,type:l,className:R,...A,...C,children:_})});g.displayName="Button";var f=a(70008),j=a.n(f);a(51194),a(3823),a(40425),a(41103);let N=e=>{let r=(0,t.createRef)();(0,t.useEffect)(()=>(r&&r.current&&j().highlightElement(r.current),()=>{}),[r]);let{code:a,plugins:l,language:d,className:i,style:n,rounded:c=2}=e;return(0,s.jsx)("pre",{className:o()("prismjs-code",l,i,{[`rounded${"default"!==c?`-${c}`:""}`]:c}),style:n,children:(0,s.jsx)("code",{ref:r,className:`language-${d}`,children:a.trim()})})},b=(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,children:l,icon:d,iconColor:i="primary",pre:n,...c}=e;return(0,s.jsxs)(h,{ref:r,tag:a,className:o()("card-label",t),...c,children:[n,d&&(0,s.jsx)(u.A,{icon:d,className:o()("card-icon",{[`text-${i}`]:i})}),(0,s.jsx)("div",{className:"card-title-wrapper",children:l})]})});b.displayName="CardLabel";let y=(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-actions",t),...d,children:l})});y.displayName="CardActions";let v=(0,t.forwardRef)((e,r)=>{let{tag:a="h5",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-title",t),...d,children:l})});v.displayName="CardTitle",(0,t.forwardRef)((e,r)=>{let{tag:a="h6",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-subtitle",t),...d,children:l})}).displayName="CardSubTitle";let w=(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,children:l,size:d,borderSize:i,borderColor:n,...c}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-header",{[`card-header-${d}`]:d,[`card-header-border-${i}`]:i,[`card-header-border-${n}`]:n},t),...c,children:l})});w.displayName="CardHeader";let $=(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,isScrollable:l,children:d,...i}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-body",{"card-body-scrollable":l},t),...i,children:d})});$.displayName="CardBody",(0,t.memo)(e=>{let{children:r,language:a="jsx",customStyle:t,isPrismJs:l=!0,className:d}=e;return l?(0,s.jsx)(N,{code:r,language:a,className:o()("my-0",d),style:t}):(0,s.jsx)(m.A,{language:a,style:c.KQ,customStyle:{borderRadius:13,backgroundColor:"var(--bs-light)",fontSize:"1rem",padding:"1.5rem 2rem",...t},wrapLongLines:!0,PreTag:"code",className:o()("shadow-sm",d),children:r})}).displayName="CardCodeView",(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-footer-left",t),...d,children:l})}).displayName="CardFooterLeft",(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-footer-right",t),...d,children:l})}).displayName="CardFooterRight",(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:t,children:l,size:d,borderSize:i,borderColor:n,...c}=e;return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card-footer",{[`card-footer-${d}`]:d,[`card-footer-border-${i}`]:i,[`card-footer-border-${n}`]:n},t),...c,children:l})}).displayName="CardFooter";let k=(0,t.forwardRef)((e,r)=>{let{tag:a="div",className:l,children:d,hasTab:i,tabButtonColor:n="primary",tabBodyClassName:c,shadow:m,borderSize:u,borderColor:p,stretch:x,isCompact:f,...j}=e,[N,b]=(0,t.useState)(0);return(0,s.jsx)(h,{ref:r,tag:a,className:o()("card",{[`card-stretch-${"semi"===x?"semi":"full"}`]:x,"card-compact":f,[`shadow${"md"!==m?`-${m}`:""}`]:!!m&&"3d"!==m,"u-shadow-3d--primary-sm":"3d"===m,border:u||0===u,[`border-${u}`]:u||0===u,[`border-${p}`]:p},l),...j,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w,{borderSize:1,children:(0,s.jsx)(y,{children:t.Children.map(d,(e,r)=>(0,s.jsx)(g,{isLight:!0,color:r===N?n:"light",role:"tab","aria-controls":e.props.id,"aria-selected":r===N,isActive:r===N,icon:e.props.icon||null,onClick:()=>b(r),children:e.props.title},e.props.id))})}),t.Children.map(d,(e,r)=>N===r?(0,s.jsx)($,{role:"tabpanel","aria-labelledby":e.props.id,className:c,children:e.props.children},e.props.id):null)]}):d})});k.displayName="Card";var S=a(64834),C=a(13918);let R=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";C.Store.addNotification({title:e,message:r,type:a,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,pauseOnHover:!0,onScreen:!0,showIcon:!0,waitForAnimation:!0}})};var _=a(92126),A=a(91040),P=a(15833),E=a(77328),T=a.n(E),I=a(74119),L=a(21475),F=a(18847);let U=a.n(F)()(()=>a.e(851).then(a.bind(a,66851)),{loadableGenerated:{webpack:()=>[66851]},ssr:!1}),D=e=>{let r={name:"",price:"",stock:"",category:""};return e.name?e.name.length<3?r.name="Must be 3 characters or more":e.name.length>20&&(r.name="Must be 20 characters or less"):r.name="Required",e.price?e.price<0&&(r.price="Price should not be 0"):r.price="Required",e.stock||(r.stock="Required"),e.category?e.category.length<3?r.category="Must be 3 characters or more":e.category.length>20&&(r.category="Must be 20 characters or less"):r.category="Required",r};var q=!0;let V=e=>{let{product:r,error:a}=e,{darkModeStatus:i}=function(){let{darkModeStatus:e,setDarkModeStatus:r}=(0,t.useContext)(_.A);return{themeStatus:e?"dark":"light",darkModeStatus:e,setDarkModeStatus:r}}(),o=(0,l.useRouter)(),{id:c}=o.query,[m,h]=(0,t.useState)([]),[p,x]=(0,t.useState)([]),[g,f]=(0,t.useState)(!1),[j,N]=(0,t.useState)(0),[y,C]=(0,t.useState)(null),[E,F]=(0,t.useState)(!1),[q,V]=(0,t.useState)(r),[M,O]=(0,t.useState)(!1),B=a||y;(0,t.useEffect)(()=>{let e=async()=>{try{let e="/api",r=c?.toString().split("-").pop();if(!r)return void C("Product ID not found in URL.");console.log("In fetch images. The API base URL is:",e);let a=await A.A.get(`${e}/images/product/${r}`);h(a.data.images),C(null)}catch(e){A.A.isAxiosError(e)?C(e.response?.data?.error||e.message):e instanceof Error?C(e.message):C("An unknown error occurred while fetching images")}};q&&e()},[c,E,q]);let z=async()=>{if(0===p.length||!q?.ID)return;f(!0);let e=new FormData;p.forEach(r=>{e.append("images",r)});try{let r=await A.A.post(`/api/images/product/${q?.ID}/batch`,e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(e.total){let r=Math.round(100*e.loaded/e.total);N(r)}}});P.oR.success("Images uploaded successfully!"),h(e=>[...e,...r.data.images]),x([])}catch(e){console.error("Upload failed:",e),A.A.isAxiosError(e)&&P.oR.error(`Upload failed: ${e.response?.data?.error||e.message}`)}finally{f(!1),N(0)}},[G,H]=(0,t.useState)("Summary"),[W,X]=(0,t.useState)({name:q?.name||"",price:q?.price||0,stock:q?.stock||0,category:""}),K=(0,d.Wx)({initialValues:{name:q?.name||"",price:q?.price||0,stock:q?.stock||0,category:""},validate:D,onSubmit:e=>{R((0,s.jsxs)("span",{className:"d-flex align-items-center",children:[(0,s.jsx)(u.A,{icon:"Info",size:"lg",className:"me-1"}),(0,s.jsx)("span",{children:"Updated Successfully"})]}),"Product has been updated successfully")}});return((0,t.useEffect)(()=>{q&&(K.setValues({name:q.name,price:q.price,stock:q.stock,category:""}),X({name:q.name,price:q.price,stock:q.stock,category:""}))},[q]),M)?(0,s.jsx)("div",{children:"Loading product details..."}):B?(0,s.jsxs)("div",{children:["Error: ",B]}):q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(T(),{children:[(0,s.jsxs)("title",{children:[r?.name||"Product"," | Talodu"]}),(0,s.jsx)("meta",{name:"description",content:r?.description||"Explore this product and more on Talodu, your online supermarket."},"description"),(0,s.jsx)("meta",{property:"og:title",content:r?.name||"Product"},"og:title"),(0,s.jsx)("meta",{property:"og:description",content:r?.description||"Explore this product and more on Talodu, your online supermarket."},"og:description")]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(L.A,{}),M?(0,s.jsx)("div",{children:"Loading product details..."}):B?(0,s.jsxs)("div",{children:["Error: ",B]}):q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-6 col-lg-6 col-sm-6",children:(0,s.jsx)(I.A,{color:"info",onClick:()=>o.back(),children:"Retour a la Liste"})}),(0,s.jsxs)("div",{className:"col-lg-6 col-md-6 col-sm-6",children:[(0,s.jsx)("span",{className:"text-muted fst-italic me-2",children:"Last update:"}),(0,s.jsx)("span",{className:"fw-bold",children:"13 hours ago"})," "]})]}),(0,s.jsxs)(n,{children:[(0,s.jsxs)("a",{className:"text-decoration-none display-6 py-3 text-danger",style:{cursor:"pointer"},children:["By ",q?.shop?.name||"Unknown Shop"]}),(0,s.jsx)("div",{className:"display-4 fw-bold py-3",children:q?.name}),(0,s.jsx)("div",{className:"container py-4",children:m?.length>0?(0,s.jsx)(U,{images:m,product:q}):(0,s.jsx)("div",{children:"No images"})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h5",{className:"mb-3",children:"Current Images"}),m?.length>0?(0,s.jsx)("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4",children:m.map(e=>(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,s.jsx)("img",{src:e.url,alt:e.altText||"Product image",className:"card-img-top img-thumbnail",style:{height:"200px",objectFit:"cover"}}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h6",{className:"card-title text-truncate",children:e.url.split("/").pop()}),e.altText&&(0,s.jsx)("p",{className:"card-text text-muted small",children:e.altText})]}),(0,s.jsx)("div",{className:"card-footer bg-white",children:(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("button",{className:"btn btn-sm btn-outline-primary",children:"Set as Primary"})})})]})},e.ID))}):(0,s.jsx)("div",{className:"alert alert-info",children:"No images available for this product"})]}),(0,s.jsx)("div",{className:"row h-100 mt-5",children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsxs)(k,{children:[(0,s.jsx)(w,{children:(0,s.jsx)(b,{children:(0,s.jsx)(v,{children:"Product Image"})})}),(0,s.jsx)($,{children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsxs)("div",{className:"row g-4",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(S.A,{type:"file",autoComplete:"photo",onChange:e=>{e.target.files&&x(Array.from(e.target.files))},multiple:!0,accept:"image/*"})}),(0,s.jsx)("button",{onClick:z,disabled:g||0===p.length,children:g?`Uploading... ${j}%`:"Upload"}),p.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Selected files:"}),(0,s.jsx)("ul",{children:p.map((e,r)=>(0,s.jsx)("li",{children:e.name},r))})]}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(I.A,{color:"dark",onClick:()=>{X({...W,image:void 0})},children:"Delete Image"})})]})})})})]})})})]})]}):(0,s.jsx)("div",{children:"Product not found"}),(0,s.jsx)("div",{className:"card h-100 mt-4 ",style:{border:"none",cursor:"pointer",boxShadow:"0 0 20px rgba(13, 89, 219, 0.2)",transition:"box-shadow 0.3s ease",padding:"7px"},children:(0,s.jsxs)("div",{className:"mt-4 mb-4 row ms-md-2 p-1 g-1",children:[(0,s.jsx)("div",{className:"col-12 ms-2 ms-md-2 col-md-3 text-center ps-md-2",children:"Copyright \xa9 2025 - iShopPro - Version 4.4.2"}),(0,s.jsx)("div",{className:"col-12 col-md-4 text-start text-md-end pe-md-2",children:"Talodu - Your online super market"}),(0,s.jsx)("div",{className:"col-12 col-md-4 text-start text-md-end pe-md-1",children:"Talodu - Votre supermarch\xe9 en Ligne"})]})})]})]}):(0,s.jsx)("div",{children:"Product not found"})}}},e=>{var r=r=>e(e.s=r);e.O(0,[725,334,511,561,130,636,593,792],()=>r(71064)),_N_E=e.O()}]);