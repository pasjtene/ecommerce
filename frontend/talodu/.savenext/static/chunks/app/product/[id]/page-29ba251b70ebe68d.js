(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{8263:(e,a,r)=>{Promise.resolve().then(r.bind(r,79026))},79026:(e,a,r)=>{"use strict";r.d(a,{default:()=>D});var s=r(95155),t=r(12115),l=r(35695),d=r(49694),i=r(29300),c=r.n(i);let o=(0,t.forwardRef)((e,a)=>{let{children:r,className:t,container:l="xxl",...d}=e;return(0,s.jsx)("div",{ref:a,className:c()("page",t,{[`container${"string"==typeof l?`-${l}`:""}`]:l}),...d,children:r})});o.displayName="Page";var n=r(50660),m=r(16600);let h=(0,t.forwardRef)((e,a)=>{let{tag:r="div",children:t,...l}=e;return(0,s.jsx)(r,{ref:a,...l,children:t})});h.displayName="TagWrapper";var u=r(62861),p=r(1425),g=r(3600);(0,t.forwardRef)((e,a)=>{let{children:r,className:t,isToolbar:l,isVertical:d,size:i,ariaLabel:o,...n}=e,m=l?"toolbar":"group";return(0,s.jsx)("div",{ref:a,className:c()({[`btn-${m}`]:!d,"btn-group-vertical":d&&"group"===m,[`btn-group-${i}`]:i},t),role:m,"aria-label":o,...n,children:r})}).displayName="ButtonGroup";let x=(0,t.forwardRef)((e,a)=>{let{children:r,tag:t="button",type:l="button",to:d,href:i,isActive:o,color:n,isOutline:m,isLight:x,isLink:f,className:j,icon:N,rounded:b,size:y,isDisable:v,shadow:w,hoverShadow:$,target:k,isVisuallyHidden:C,...S}=e,R=c()("btn",{[`btn-${m||f?`outline-${n}`:n}`]:n&&!x||n&&f,"border-transparent":f,[`btn-${y}`]:y,[`btn-hover-shadow${"default"!==$?`-${$}`:""}`]:$,[`btn-light-${n}`]:x,[`shadow${"default"!==w?`-${w}`:""}`]:!!w,[`rounded${"default"!==b?`-${b}`:""}`]:b,"rounded-0":"bottom"===b||"top"===b||"end"===b||"start"===b||0===b,"btn-only-icon":!r||C,disabled:v,active:o},j),A=(0,s.jsxs)(s.Fragment,{children:[N&&(0,s.jsx)(u.A,{icon:N,className:"btn-icon"}),C?(0,s.jsx)("span",{className:"visually-hidden",children:"Toggle Dropdown"}):r]}),I=v&&{tabIndex:-1,"aria-disabled":!0,disabled:!0};return"a"===t?"string"==typeof d&&/^#/i.test(d)?(0,s.jsx)(g.Vq,{ref:a,className:R,to:d,...I,...S,children:A}):d?(0,s.jsx)(p.N_,{ref:a,className:R,to:d,rel:"noopener",target:k,...I,...S,children:A}):(0,s.jsx)("a",{ref:a,className:R,href:i,role:"button",rel:"noopener",target:k,...I,...S,children:A}):(0,s.jsx)(h,{ref:a,tag:t,type:l,className:R,...I,...S,children:A})});x.displayName="Button";var f=r(63241),j=r.n(f);r(17015),r(52576),r(59088),r(38870);let N=e=>{let a=(0,t.createRef)();(0,t.useEffect)(()=>(a&&a.current&&j().highlightElement(a.current),()=>{}),[a]);let{code:r,plugins:l,language:d,className:i,style:o,rounded:n=2}=e;return(0,s.jsx)("pre",{className:c()("prismjs-code",l,i,{[`rounded${"default"!==n?`-${n}`:""}`]:n}),style:o,children:(0,s.jsx)("code",{ref:a,className:`language-${d}`,children:r.trim()})})},b=(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,children:l,icon:d,iconColor:i="primary",pre:o,...n}=e;return(0,s.jsxs)(h,{ref:a,tag:r,className:c()("card-label",t),...n,children:[o,d&&(0,s.jsx)(u.A,{icon:d,className:c()("card-icon",{[`text-${i}`]:i})}),(0,s.jsx)("div",{className:"card-title-wrapper",children:l})]})});b.displayName="CardLabel";let y=(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-actions",t),...d,children:l})});y.displayName="CardActions";let v=(0,t.forwardRef)((e,a)=>{let{tag:r="h5",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-title",t),...d,children:l})});v.displayName="CardTitle",(0,t.forwardRef)((e,a)=>{let{tag:r="h6",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-subtitle",t),...d,children:l})}).displayName="CardSubTitle";let w=(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,children:l,size:d,borderSize:i,borderColor:o,...n}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-header",{[`card-header-${d}`]:d,[`card-header-border-${i}`]:i,[`card-header-border-${o}`]:o},t),...n,children:l})});w.displayName="CardHeader";let $=(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,isScrollable:l,children:d,...i}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-body",{"card-body-scrollable":l},t),...i,children:d})});$.displayName="CardBody",(0,t.memo)(e=>{let{children:a,language:r="jsx",customStyle:t,isPrismJs:l=!0,className:d}=e;return l?(0,s.jsx)(N,{code:a,language:r,className:c()("my-0",d),style:t}):(0,s.jsx)(m.A,{language:r,style:n.KQ,customStyle:{borderRadius:13,backgroundColor:"var(--bs-light)",fontSize:"1rem",padding:"1.5rem 2rem",...t},wrapLongLines:!0,PreTag:"code",className:c()("shadow-sm",d),children:a})}).displayName="CardCodeView",(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-footer-left",t),...d,children:l})}).displayName="CardFooterLeft",(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,children:l,...d}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-footer-right",t),...d,children:l})}).displayName="CardFooterRight",(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:t,children:l,size:d,borderSize:i,borderColor:o,...n}=e;return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card-footer",{[`card-footer-${d}`]:d,[`card-footer-border-${i}`]:i,[`card-footer-border-${o}`]:o},t),...n,children:l})}).displayName="CardFooter";let k=(0,t.forwardRef)((e,a)=>{let{tag:r="div",className:l,children:d,hasTab:i,tabButtonColor:o="primary",tabBodyClassName:n,shadow:m,borderSize:u,borderColor:p,stretch:g,isCompact:f,...j}=e,[N,b]=(0,t.useState)(0);return(0,s.jsx)(h,{ref:a,tag:r,className:c()("card",{[`card-stretch-${"semi"===g?"semi":"full"}`]:g,"card-compact":f,[`shadow${"md"!==m?`-${m}`:""}`]:!!m&&"3d"!==m,"u-shadow-3d--primary-sm":"3d"===m,border:u||0===u,[`border-${u}`]:u||0===u,[`border-${p}`]:p},l),...j,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w,{borderSize:1,children:(0,s.jsx)(y,{children:t.Children.map(d,(e,a)=>(0,s.jsx)(x,{isLight:!0,color:a===N?o:"light",role:"tab","aria-controls":e.props.id,"aria-selected":a===N,isActive:a===N,icon:e.props.icon||null,onClick:()=>b(a),children:e.props.title},e.props.id))})}),t.Children.map(d,(e,a)=>N===a?(0,s.jsx)($,{role:"tabpanel","aria-labelledby":e.props.id,className:n,children:e.props.children},e.props.id):null)]}):d})});k.displayName="Card";var C=r(57120),S=r(41433);let R=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";S.Store.addNotification({title:e,message:a,type:r,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,pauseOnHover:!0,onScreen:!0,showIcon:!0,waitForAnimation:!0}})};var A=r(25858),I=r(23464),_=r(38543),E=r(39568),P=r(9224);let T=(0,r(55028).default)(()=>r.e(191).then(r.bind(r,68191)),{loadableGenerated:{webpack:()=>[68191]},ssr:!1}),F=e=>{let a={name:"",price:"",stock:"",category:""};return e.name?e.name.length<3?a.name="Must be 3 characters or more":e.name.length>20&&(a.name="Must be 20 characters or less"):a.name="Required",e.price?e.price<0&&(a.price="Price should not be 0"):a.price="Required",e.stock||(a.stock="Required"),e.category?e.category.length<3?a.category="Must be 3 characters or more":e.category.length>20&&(a.category="Must be 20 characters or less"):a.category="Required",a},D=e=>{let{initialProduct:a}=e,{darkModeStatus:r}=function(){let{darkModeStatus:e,setDarkModeStatus:a}=(0,t.useContext)(A.A);return{themeStatus:e?"dark":"light",darkModeStatus:e,setDarkModeStatus:a}}(),i=(0,l.useRouter)(),[c,n]=(0,t.useState)([]),[m,h]=(0,t.useState)([]),[p,g]=(0,t.useState)(!1),[x,f]=(0,t.useState)(0),[j,N]=(0,t.useState)(!1),[y,S]=(0,t.useState)(a),[D,L]=(0,t.useState)(null),[U,V]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=async()=>{try{if(!y?.ID)return void L("Product ID not found.");let e=await I.A.get(`/api/images/product/${y.ID}`);n(e.data.images),L(null)}catch(e){I.A.isAxiosError(e)?L(e.response?.data?.error||e.message):e instanceof Error?L(e.message):L("An unknown error occurred while fetching images")}};y&&e()},[y,j]);let q=async()=>{if(0===m.length||!y?.ID)return;g(!0);let e=new FormData;m.forEach(a=>{e.append("images",a)});try{let a=await I.A.post(`/api/images/product/${y?.ID}/batch`,e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(e.total){let a=Math.round(100*e.loaded/e.total);f(a)}}});_.oR.success("Images uploaded successfully!"),n(e=>[...e,...a.data.images]),h([])}catch(e){console.error("Upload failed:",e),I.A.isAxiosError(e)&&_.oR.error(`Upload failed: ${e.response?.data?.error||e.message}`)}finally{g(!1),f(0)}},[M,O]=(0,t.useState)("Summary"),[B,z]=(0,t.useState)({name:a?.name||"",price:a?.price||0,stock:a?.stock||0,category:""}),G=(0,d.Wx)({initialValues:{name:a?.name||"",price:a?.price||0,stock:a?.stock||0,category:""},validate:F,onSubmit:e=>{R((0,s.jsxs)("span",{className:"d-flex align-items-center",children:[(0,s.jsx)(u.A,{icon:"Info",size:"lg",className:"me-1"}),(0,s.jsx)("span",{children:"Updated Successfully"})]}),"Product has been updated successfully")}});return(0,t.useEffect)(()=>{a&&(G.setValues({name:a.name,price:a.price,stock:a.stock,category:""}),z({name:a.name,price:a.price,stock:a.stock,category:""}))},[a]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(P.A,{}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-md-6 col-lg-6 col-sm-6",children:(0,s.jsx)(E.A,{color:"info",onClick:()=>i.back(),children:"Retour a la Liste"})}),(0,s.jsxs)("div",{className:"col-lg-6 col-md-6 col-sm-6",children:[(0,s.jsx)("span",{className:"text-muted fst-italic me-2",children:"Last update:"}),(0,s.jsx)("span",{className:"fw-bold",children:"13 hours ago"})," "]})]}),(0,s.jsxs)(o,{children:[(0,s.jsxs)("a",{className:"text-decoration-none display-6 py-3 text-danger",style:{cursor:"pointer"},children:["By ",y?.shop?.name||"Unknown Shop"]}),(0,s.jsx)("div",{className:"display-4 fw-bold py-3",children:y?.name}),(0,s.jsx)("div",{className:"container py-4",children:c?.length>0?(0,s.jsx)(T,{images:c,product:y}):(0,s.jsx)("div",{children:"No images"})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h5",{className:"mb-3",children:"Current Images"}),c?.length>0?(0,s.jsx)("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4",children:c.map(e=>(0,s.jsx)("div",{className:"col",children:(0,s.jsxs)("div",{className:"card h-100 shadow-sm",children:[(0,s.jsx)("img",{src:e.url,alt:e.altText||"Product image",className:"card-img-top img-thumbnail",style:{height:"200px",objectFit:"cover"}}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h6",{className:"card-title text-truncate",children:e.url.split("/").pop()}),e.altText&&(0,s.jsx)("p",{className:"card-text text-muted small",children:e.altText})]}),(0,s.jsx)("div",{className:"card-footer bg-white",children:(0,s.jsx)("div",{className:"d-flex justify-content-between",children:(0,s.jsx)("button",{className:"btn btn-sm btn-outline-primary",children:"Set as Primary"})})})]})},e.ID))}):(0,s.jsx)("div",{className:"alert alert-info",children:"No images available for this product"})]}),(0,s.jsx)("div",{className:"row h-100 mt-5",children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsxs)(k,{children:[(0,s.jsx)(w,{children:(0,s.jsx)(b,{children:(0,s.jsx)(v,{children:"Product Image"})})}),(0,s.jsx)($,{children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-lg-8",children:(0,s.jsxs)("div",{className:"row g-4",children:[(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(C.A,{type:"file",autoComplete:"photo",onChange:e=>{e.target.files&&h(Array.from(e.target.files))},multiple:!0,accept:"image/*"})}),(0,s.jsx)("button",{onClick:q,disabled:p||0===m.length,children:p?`Uploading... ${x}%`:"Upload"}),m.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Selected files:"}),(0,s.jsx)("ul",{children:m.map((e,a)=>(0,s.jsx)("li",{children:e.name},a))})]}),(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)(E.A,{color:"dark",onClick:()=>{z({...B,image:void 0})},children:"Delete Image"})})]})})})})]})})})]})]}),(0,s.jsx)("div",{className:"card h-100 mt-4 ",style:{border:"none",cursor:"pointer",boxShadow:"0 0 20px rgba(13, 89, 219, 0.2)",transition:"box-shadow 0.3s ease",padding:"7px"},children:(0,s.jsxs)("div",{className:"mt-4 mb-4 row ms-md-2 p-1 g-1",children:[(0,s.jsx)("div",{className:"col-12 ms-2 ms-md-2 col-md-3 text-center ps-md-2",children:"Copyright \xa9 2025 - iShopPro - Version 4.4.2"}),(0,s.jsx)("div",{className:"col-12 col-md-4 text-start text-md-end pe-md-2",children:"Talodu - Your online super market"}),(0,s.jsx)("div",{className:"col-12 col-md-4 text-start text-md-end pe-md-1",children:"Talodu - Votre supermarch\xe9 en Ligne"})]})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[249,266,687,464,276,420,533,441,684,358],()=>a(8263)),_N_E=e.O()}]);