"use strict";exports.id=959,exports.ids=[959],exports.modules={35073:(e,s,a)=>{a.a(e,async(e,l)=>{try{a.d(s,{A:()=>n});var t=a(8732),c=a(82015),r=a(1428),i=e([r]);r=(i.then?(await i)():i)[0];let n=({product:e,onSave:s,onCancel:a})=>{let[l,i]=(0,c.useState)([]),[n,d]=(0,c.useState)({...e,categories:e.categories||[],shop:e.shop||l[0]||{ID:"",name:""}}),[o,m]=(0,c.useState)([]),[h,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let e=process.env.API_BASE_URL||"http://127.0.0.1:8888",[s,a]=await Promise.all([r.default.get(e+"/categories"),r.default.get(e+"/shops")]);m(s.data),i(a.data.shops),console.log("The shops :",a.data.shops),console.log("The categories :",s.data)}catch(e){console.error("Error fetching data:",e)}})()},[]);let p=e=>{let{name:s,value:a}=e.target;d(e=>({...e,[s]:"price"===s||"stock"===s?Number(a):a}))},u=(e,s)=>{d(a=>{let l=[...a.categories||[]];if(s){let s=o.find(s=>s.ID===e);s&&l.push(s)}else{let s=l.findIndex(s=>s.ID===e);-1!==s&&l.splice(s,1)}return{...a,categories:l}})};return(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h3",{children:"Edit Product"})}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(n)},children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Name"}),(0,t.jsx)("input",{type:"text",className:"form-control",name:"name",value:n.name,onChange:p,required:!0})]}),(0,t.jsxs)("div",{className:"row mb-3",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label",children:"Price"}),(0,t.jsx)("input",{type:"number",className:"form-control",name:"price",value:n.price,onChange:p,min:"0",step:"0.01",required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{className:"form-label",children:"Stock"}),(0,t.jsx)("input",{type:"number",className:"form-control",name:"stock",value:n.stock,onChange:p,min:"0",required:!0})]})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Description"}),(0,t.jsx)("textarea",{className:"form-control",name:"description",value:n.description,onChange:p,rows:3})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Shop"}),(0,t.jsx)("select",{className:"form-select",name:"shop",value:n.shop?.ID,onChange:e=>{console.log("The selected product is: ",n);let s=l.find(s=>s.ID===Number(e.target.value));s&&d(e=>({...e,shop:s,ShopID:s.ID}))},required:!0,children:l.map(e=>(0,t.jsx)("option",{value:e.ID,children:e.name},e.ID))})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Categories"}),(0,t.jsx)("div",{className:"row",children:o.map(e=>(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"form-check",children:[(0,t.jsx)("input",{type:"checkbox",className:"form-check-input",id:`category-${e.ID}`,checked:n.categories?.some(s=>s.ID===e.ID),onChange:s=>u(e.ID,s.target.checked)}),(0,t.jsx)("label",{className:"form-check-label",htmlFor:`category-${e.ID}`,children:e.name})]})},e.ID))})]}),(0,t.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?"Saving...":"Save Changes"})]})]})})]})};l()}catch(e){l(e)}})},38551:(e,s,a)=>{a.a(e,async(e,l)=>{try{a.d(s,{JR:()=>i});var t=a(1428),c=e([t]);let r=(t=(c.then?(await c)():c)[0]).default.create({baseURL:process.env.REACT_APP_API_BASE_URL||"/api",headers:{"Content-Type":"application/json"}}),i=process.env.REACT_APP_API_PRODUCTION_BASE_URL;process.env.REACT_APP_API_IMAGES,console.log("The API base URL is: ",i),console.log("The API base URL from env is: ",process.env.REACT_APP_API_PRODUCTION_BASE_URL),process.env.REACT_APP_API_DEVELOPMENT_ENV?console.log("This is dev env"):process.env.REACT_APP_API_PRODUCTION_ENV&&console.log("we are in prod env"),r.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e}),r.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e))),l()}catch(e){l(e)}})},39959:(e,s,a)=>{a.a(e,async(e,l)=>{try{a.r(s),a.d(s,{default:()=>m});var t=a(8732),c=a(82015),r=a(38551),i=a(35073),n=a(1428),d=a(14391),o=e([r,i,n,d]);[r,i,n,d]=o.then?(await o)():o;let m=({images:e,product:s})=>{let[a,l]=(0,c.useState)(e[0]||null),[o,m]=(0,c.useState)({x:0,y:0}),[h,x]=(0,c.useState)(!1),p=(0,c.useRef)(null),[u,j]=(0,c.useState)(!1),[N,b]=(0,c.useState)(s),v="/api",g=async e=>{console.log("The prduct to update: ",e);try{let a=await n.default.put(r.JR+`/products/${s.ID}`,e);b(a.data),console.log("The updated prduct ...: ",a.data),console.log("The updated prduct shop is ...: ",a.data.ShopID),j(!1),d.toast.success("Product updated savedsuccessfully")}catch(e){d.toast.error("Failed to update products"),console.log(e)}};return(0,t.jsxs)("div",{className:"container mt-4",children:[(0,t.jsx)("div",{children:N.name}),(0,t.jsx)("div",{className:"container mt-4",children:u?(0,t.jsx)(i.A,{product:N,onSave:g,onCancel:()=>j(!1)}):(0,t.jsx)(t.Fragment,{})}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("div",{className:"col-lg-8",children:[(0,t.jsx)("div",{className:"card mb-4 shadow-sm main-image-container",ref:p,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onMouseMove:e=>{if(!p.current)return;let{left:s,top:a,width:l,height:t}=p.current.getBoundingClientRect(),c=(e.clientX-s)/l*100,r=(e.clientY-a)/t*100;m({x:c,y:r})},children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:v+a.url,alt:a.altText||"Product image",className:"main-product-image"}),h&&(0,t.jsx)("div",{className:"magnifier-lens",style:{left:`${o.x}%`,top:`${o.y}%`,transform:"translate(-50%, -50%)"}})]}):(0,t.jsx)("div",{className:"no-image-placeholder",children:(0,t.jsx)("span",{className:"text-muted",children:"No image selected"})})}),(0,t.jsxs)("div",{className:"thumbnail-gallery",children:[(0,t.jsx)("h5",{className:"mb-3",children:"Product Images"}),(0,t.jsx)("div",{className:"d-flex flex-row flex-nowrap overflow-auto pb-2",children:e?.length>0?e.map(e=>(0,t.jsxs)("div",{className:"thumbnail-container me-2",onClick:()=>l(e),onMouseEnter:()=>l(e),children:[(0,t.jsx)("img",{src:v+e.url,alt:e.altText||"Product thumbnail",className:`img-thumbnail ${a?.ID===e.ID?"active-thumbnail":""}`}),e.isPrimary&&(0,t.jsx)("span",{className:"badge bg-primary position-absolute top-0 start-0",children:"Primary"})]},e.ID)):(0,t.jsx)("div",{className:"alert alert-info w-100",children:"No images available for this product"})})]})]}),(0,t.jsxs)("div",{className:"col-lg-4 position-relative",children:[h&&a&&(0,t.jsx)("div",{className:"magnified-preview",style:{backgroundImage:`url(${v+a.url})`,backgroundPosition:`${o.x}% ${o.y}%`}}),(0,t.jsx)("div",{className:"card shadow-sm product-details-card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h4",{className:"card-title",children:"Product Details"}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{children:"Image Information"}),(0,t.jsx)("p",{className:"text-muted small mb-1",children:a.altText||"No description available"}),(0,t.jsx)("p",{className:"small",children:a.url.split("/").pop()})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"d-grid gap-2",children:[(0,t.jsx)("button",{onClick:()=>j(!0),className:"btn btn-primary",children:"Edit product"}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",children:"View Full Details"})]})]}):(0,t.jsx)("div",{className:"text-center text-muted py-4",children:"Select an image to see details"})]})}),(0,t.jsx)("div",{className:"card shadow-sm product-details-card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h4",{className:"card-title",children:"Product Details 2"}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{children:"Image Information"}),(0,t.jsx)("p",{className:"text-muted small mb-1",children:a.altText||"No description available"}),(0,t.jsx)("p",{className:"small",children:a.url.split("/").pop()})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{children:"Prix"}),s.price?(0,t.jsxs)("h5",{className:"text-primary",children:["$",s.price.toFixed(2)]}):(0,t.jsx)("p",{className:"text-muted",children:"Le prix du produit n'est pas disponible"})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{children:"Stock"}),s.stock?(0,t.jsxs)("h5",{className:"text-primary",children:["En Stock: ",s.stock," disponible"]}):(0,t.jsx)("p",{className:"text-muted",children:"Ce produit n'est pas disponible"})]}),a.price?(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{children:"Pricing"}),(0,t.jsxs)("h5",{className:"text-primary",children:["$",a.price.toFixed(2)]})]}):(0,t.jsx)("p",{className:"text-muted",children:"Cette version n'a pas un prix special"}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{children:"SKU"}),(0,t.jsx)("p",{className:"text-muted small",children:a.sku||"Not specified"})]}),(0,t.jsxs)("div",{className:"d-grid gap-2",children:[(0,t.jsx)("button",{className:"btn btn-primary",children:"Add to Cart"}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",children:"View Full Details"})]})]}):(0,t.jsx)("div",{className:"text-center text-muted py-4",children:"Select an image to see details"})]})})]})]})]})};l()}catch(e){l(e)}})}};